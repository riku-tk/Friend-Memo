<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/tabs/tab1"></ion-back-button>
    </ion-buttons>
    <ion-title *ngIf="profileData"
      ><ion-input
        [value]="profileData.name"
        [(ngModel)]="profileData['name']"
        [ngModelOptions]="{ standalone: true }"
      ></ion-input
    ></ion-title>
    <ion-buttons slot="primary" [ngSwitch]="scene">
      <ion-button *ngSwitchCase="'profile'" (click)="setProfileData()" color="secondary" button="true">保存</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<ion-content>
  <ion-segment [(ngModel)]="scene">
    <ion-segment-button value="profile" checked>
      <ion-icon name="person-circle-outline"></ion-icon>
    </ion-segment-button>
    <ion-segment-button value="memo">
      <ion-icon name="chatbubbles-outline"></ion-icon>
    </ion-segment-button>
  </ion-segment>

  <div [ngSwitch]="scene">
    <div *ngSwitchCase="'profile'">
      <form #f="ngForm" *ngIf="profileData">
        <ion-avatar
          *ngIf="profileData"
          slot="start"
          style="width: 60px; height: 60px; display: block; margin-left: auto; margin-right: auto; margin-top: 5px"
        >
          <ion-img (click)="takePicture()" [src]="profileData?.profilePhotoDataUrl || '/assets/shapes.svg'"> ></ion-img>
        </ion-avatar>
        <!-- <ion-item
        ><ion-icon name="happy-outline"></ion-icon>年齢:
        <ion-select value="31" [ngModelOptions]="{ standalone: true }" [(ngModel)]="profileData['age']">
          <ion-select-option *ngFor="let age of ageArray">{{ age }}</ion-select-option>
        </ion-select>
      </ion-item> -->
        <ion-item>
          <ion-icon class="profileIcon" name="gift-outline"></ion-icon>
          <ion-item lines="none">
            <ion-select value="12" [ngModelOptions]="{ standalone: true }" [(ngModel)]="profileData['birthMonth']">
              <ion-select-option *ngFor="let month of birthMonthArray">{{ month }}</ion-select-option>
            </ion-select>
            月
          </ion-item>
          <ion-item lines="none">
            <ion-select value="31" [ngModelOptions]="{ standalone: true }" [(ngModel)]="profileData['birthDay']">
              <ion-select-option *ngFor="let day of birthDayArray">{{ day }}</ion-select-option>
            </ion-select>
            日
          </ion-item>
        </ion-item>
        <ion-item
          ><ion-icon class="profileIcon" name="transgender-outline"></ion-icon>性別:
          <ion-select [ngModelOptions]="{ standalone: true }" [(ngModel)]="profileData['gender']">
            <ion-select-option>男性</ion-select-option>
            <ion-select-option>女性</ion-select-option>
            <ion-select-option>その他</ion-select-option>
          </ion-select></ion-item
        >
        <ion-item
          ><ion-icon class="profileIcon" name="business-outline"></ion-icon>職業:
          <ion-input
            [value]="profileData.birthPlace"
            [(ngModel)]="profileData['profession']"
            [ngModelOptions]="{ standalone: true }"
          ></ion-input>
        </ion-item>
        <ion-item
          ><ion-icon class="profileIcon" name="home-outline"></ion-icon>出身地:
          <ion-input
            [value]="profileData.birthPlace"
            [(ngModel)]="profileData['birthPlace']"
            [ngModelOptions]="{ standalone: true }"
          ></ion-input>
        </ion-item>
        <ion-item
          ><ion-icon class="profileIcon" name="game-controller-outline"></ion-icon>趣味:
          <ion-input
            [value]="profileData.hobby"
            [(ngModel)]="profileData['hobby']"
            [ngModelOptions]="{ standalone: true }"
          ></ion-input
        ></ion-item>
        <ion-item
          ><ion-icon class="profileIcon" name="thumbs-up-outline"></ion-icon>好きなもの:
          <ion-input
            [value]="profileData.favoriteFood"
            [(ngModel)]="profileData['favoriteFood']"
            [ngModelOptions]="{ standalone: true }"
          ></ion-input
        ></ion-item>
        <ion-item
          ><ion-icon class="profileIcon" name="sad-outline"></ion-icon>嫌いなもの:
          <ion-input
            [value]="profileData.dislikes"
            [(ngModel)]="profileData['dislikes']"
            [ngModelOptions]="{ standalone: true }"
          ></ion-input
        ></ion-item>
      </form>
    </div>
    <div *ngSwitchCase="'memo'">
      <ion-card>
        <ion-item>
          <ion-input
            placeholder="メモを追加"
            [(ngModel)]="memoData['text']"
            [ngModelOptions]="{ standalone: true }"
          ></ion-input>
          <ion-button slot="end" name="add-circle-outline" (click)="addMemoData()">
            <ion-icon name="add-circle-sharp"></ion-icon>
          </ion-button>
        </ion-item>
      </ion-card>
      <ion-card *ngFor="let memo of memoList | async">
        <script>
          console.log(memo);
        </script>
        <ion-item>
          <ion-card-content> {{ memo.text }} </ion-card-content>
        </ion-item>
      </ion-card>
      <!-- <ion-card>
        <ion-item>
          <ion-card-content> 麻雀の好きな役は平和 </ion-card-content>
        </ion-item>
      </ion-card>
      <ion-card>
        <ion-item>
          <ion-card-content> 毎日ラーメン食べてる </ion-card-content>
        </ion-item>
      </ion-card>
      <ion-card>
        <ion-item>
          <ion-card-content> いつも眠そう </ion-card-content>
        </ion-item>
      </ion-card> -->
    </div>
  </div>
</ion-content>

<ion-footer class="ion-no-border">
  <div [ngSwitch]="scene">
    <div *ngSwitchCase="'profile'">
      <ion-toolbar *ngIf="profileData">
        <ion-button
          slot="end"
          (click)="presentAlertConfirm()"
          color="danger"
          button="true"
          style="display: block; margin-right: 20px; margin-bottom: 10px"
          >削除</ion-button
        >
      </ion-toolbar>
    </div>
    <div *ngSwitchCase="'memo'"></div>
  </div>
</ion-footer>
